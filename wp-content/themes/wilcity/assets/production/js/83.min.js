(window.webpackJsonp=window.webpackJsonp||[]).push([[83],{520:function(t,i,s){"use strict";s.r(i);var o=s(754),a=s(652);for(var e in a)"default"!==e&&function(t){s.d(i,t,function(){return a[t]})}(e);var n=s(0),l=Object(n.a)(a.default,o.a,o.b,!1,null,null,null);l.options.__file="assets/dev/js/shortcodes/QuickNotifications.vue",i.default=l.exports},652:function(t,i,s){"use strict";s.r(i);var o=s(653),a=s.n(o);for(var e in o)"default"!==e&&function(t){s.d(i,t,function(){return o[t]})}(e);i.default=a.a},653:function(t,i,s){"use strict";var o=s(1);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a={data:function(){return{oTranslation:WILCITY_I18,isShowing:"no",isLoading:"no",needDashboardUrl:"yes",aNotifications:[],errMsg:"",notificationDashboardUrl:"#",countNewNotifications:0,isLoadedCheckUnFocusClick:!1}},components:{BlockLoading:o(s(73)).default},computed:{wrapperNotificationsClass:function(){return"no"==this.isShowing?"header_loginBody__2hz2g":"header_loginBody__2hz2g active"},aCssClass:function(){return"yes"==this.isShowing?"header_loginHead__3HoVP active":"header_loginHead__3HoVP"}},mounted:function(){var t=this;setTimeout(function(){t.fetchNewNotifications(),t.$store.commit("updateTimeout")},this.$store.getters.getTimeout)},methods:{deleteNotification:function(t,i){var s=this;if(!confirm(this.oTranslation.confirmDeleteNotification))return!1;jQuery.ajax({type:"POST",url:WILOKE_GLOBAL.ajaxurl,data:{action:"wilcity_delete_notification",ID:t.ID},success:function(t){t.success?s.aNotifications.splice(i,1):s.errorMsg=t.data.msg}})},fetchNewNotifications:function(){var t=this;jQuery.ajax({type:"POST",url:WILOKE_GLOBAL.ajaxurl,data:{action:"wilcity_count_new_notifications"},success:function(i){t.countNewNotifications=i.data}})},resetNotification:function(){if(this.countNewNotifications<1)return!1;this.countNewNotifications=0,setTimeout(function(){jQuery.ajax({type:"POST",url:WILOKE_GLOBAL.ajaxurl,data:{action:"wilcity_reset_new_notifications"}})},4e3)},hideMenu:function(){this.isShowing="no"},toggleShowing:function(){var t=this;this.isShowing="no"==this.isShowing?"yes":"no",this.isLoadedCheckUnFocusClick||(this.hideWhenOurClick(),this.isLoadedCheckUnFocusClick=!0),this.isLoading="yes",this.errMsg="",this.aNotifications=[],this.resetNotification(),jQuery.ajax({type:"post",url:WILOKE_GLOBAL.ajaxurl,data:{action:"wilcity_fetch_list_notifications",needDashboardUrl:this.needDashboardUrl,limit:5},success:function(i){i.success?(t.aNotifications=i.data.oInfo,"#"===t.notificationDashboardUrl&&(t.notificationDashboardUrl=i.data.dashboardUrl,t.needDashboardUrl="no")):t.errMsg=i.data.msg,t.isLoading="no"}})},hideWhenOurClick:function(){var t=this;jQuery(document).on("click",function(i){"yes"==t.isShowing&&(jQuery(i.target).closest("#"+WHITE_LABEL+"-quick-notifications").length||(t.isShowing="no"))})}}};i.default=a},754:function(t,i,s){"use strict";var o=function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",[s("a",{class:t.aCssClass,attrs:{href:"#","data-toggle-minWidth":"768",dataTooltip:t.oTranslation.notifications,"data-tooltip-placement":"top","data-tooltip-theme":"light"},on:{click:function(i){return i.preventDefault(),t.toggleShowing(i)}}},[s("i",{staticClass:"la la-bell-o"}),s("span",{directives:[{name:"show",rawName:"v-show",value:t.countNewNotifications,expression:"countNewNotifications"}],staticClass:"header_number__1a6F5 bg-color-quaternary"},[t._v(t._s(t.countNewNotifications))])]),t._v(" "),s("div",{class:t.wrapperNotificationsClass},[s("div",{directives:[{name:"show",rawName:"v-show",value:"yes"==t.isLoading,expression:"isLoading=='yes'"}],staticClass:"pos-r",staticStyle:{"min-height":"100px"}},[s("block-loading",{attrs:{"is-loading":t.isLoading,position:"pos-a-center"}})],1),t._v(" "),s("ul",{directives:[{name:"show",rawName:"v-show",value:t.aNotifications.length,expression:"aNotifications.length"}],staticClass:"list-utility_module__32oNg list-none list-utility_abs__OYiyL arrow--top-right"},[t._l(t.aNotifications,function(i){return s("li",{staticClass:"list-utility_list__1DzGk"},[s("a",{staticClass:"list-utility_link__3BRZx",attrs:{href:i.link}},[s("span",{staticClass:"list-utility_remove__1Vlf4 color-primary--hover",attrs:{title:t.oTranslation.deleteMsg},on:{click:function(s){return s.preventDefault(),t.deleteNotification(i,t.order)}}},[s("i",{staticClass:"la la-close"})]),t._v(" "),s("div",{staticClass:"utility-box-1_module__MYXpX utility-box-1_sm__mopok utility-box-1_boxLeft__3iS6b clearfix "},[i.featuredImg?s("div",{staticClass:"utility-box-1_avatar__DB9c_ rounded-circle",style:{"background-image":"url("+i.featuredImg+")"}},[s("img",{attrs:{src:i.featuredImg,alt:i.title}})]):t._e(),t._v(" "),s("div",{staticClass:"utility-box-1_body__8qd9j"},[s("div",{staticClass:"utility-box-1_group__2ZPA2 text-ellipsis"},[i.title?s("h3",{staticClass:"utility-box-1_title__1I925",domProps:{innerHTML:t._s(i.title)}}):t._e(),t._v(" "),s("div",{staticClass:"utility-box-1_content__3jEL7"},[s("span",{domProps:{innerHTML:t._s(i.content)}}),t._v(" "),i.contentHighlight?s("span",{staticClass:"color-dark-1",domProps:{innerHTML:t._s(i.contentHighlight)}}):t._e()])]),t._v(" "),s("div",{staticClass:"utility-box-1_description__2VDJ6"},[s("i",{staticClass:"la la-comments color-primary"}),t._v(" "+t._s(i.time))])])])])])}),t._v(" "),s("li",{directives:[{name:"show",rawName:"v-show",value:t.aNotifications.length,expression:"aNotifications.length"}],staticClass:"list-utility_list__1DzGk"},[s("a",{staticClass:"list-utility_more__2Y_w7 wil-text-center color-primary--hover",attrs:{href:t.notificationDashboardUrl}},[t._v(t._s(t.oTranslation.viewAll))])])],2),t._v(" "),s("ul",{directives:[{name:"show",rawName:"v-show",value:t.errMsg.length,expression:"errMsg.length"}],staticClass:"list-utility_module__32oNg list-none list-utility_abs__OYiyL arrow--top-right"},[s("li",{staticClass:"list-utility_list__1DzGk"},[s("a",{staticClass:"list-utility_link__3BRZx",attrs:{href:"#"}},[s("div",{staticClass:"utility-box-1_module__MYXpX utility-box-1_sm__mopok utility-box-1_boxLeft__3iS6b clearfix"},[s("div",{staticClass:"utility-box-1_body__8qd9j"},[s("div",{staticClass:"utility-box-1_group__2ZPA2 text-ellipsis"},[s("div",{staticClass:"utility-box-1_content__3jEL7",domProps:{innerHTML:t._s(t.errMsg)}})])])])])])])])])},a=[];o._withStripped=!0,s.d(i,"a",function(){return o}),s.d(i,"b",function(){return a})}}]);