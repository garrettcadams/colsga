!function(e){e.fn.freshslider=function(t){var s=this,i="undefined"==typeof t.range?!1:t.range,n=!i,a=t.min||0,f=t.max||100,l=f-a,d=t.step||1,r=t.unit||"",u="undefined"==typeof t.enabled?!0:t.enabled,v=[0,1],o="undefined"==typeof t.text?!0:t.text,c=null;if(0>l)throw new Error;var h=function(e){return e&&"[object Function]"==Object.prototype.toString.call(e)},g=null;h(t.onchange)===!0&&(g=t.onchange);var m=""+d,p=0;m.indexOf(".")>=0&&(p=m.length-m.indexOf(".")-1),t.hasOwnProperty("value")?n?v[1]=(t.value-a)/l:t.value.length&&2==t.value.length&&(v[0]=(t.value[0]-a)/l,v[1]=(t.value[1]-a)/l):n&&(v[1]=.5),c=i?this.html("<div class='fsslider'><div class='fsfull-value'></div><div class='fssel-value'></div><div class='fscaret fss-left'></div><div class='fscaret fss-right'></div></div>").find(".fsslider"):this.html("<div class='fsslider'><div class='fsfull-value'></div><div class='fssel-value'></div><div class='fscaret'></div></div>").find(".fsslider");var x=e(this.find(".fscaret")[0]),b=n?x:e(this.find(".fscaret")[1]),w=this.find(".fssel-value"),y=function(e){return d*Math.round(e/d)},W=function(){o&&(b.text((y(v[1]*l)+a).toFixed(p)+r),n||x.text((y(v[0]*l)+a).toFixed(p)+r));var e=s.width(),t=x.outerWidth(),i=b.outerWidth(),f=e-(t+i)/2;w.css({left:v[0]*e,width:(v[1]-v[0])*e}),x.css({left:v[0]*f+t/2,"margin-left":-(t/2),"z-index":D?0:1}),b.css({left:v[1]*f+i/2,"margin-left":-(i/2),"z-index":D?1:0}),g&&(n?g(y(v[1]*l)+a):g(y(v[0]*l)+a,y(v[1]*l)+a))},D=!0,O=!1;this.mousedown(function(t){if(u){O=!0;var i=s.width(),a=x.outerWidth(),f=b.outerWidth(),l=i-(a+f)/2,d=t.target,r=d.className,o=t.pageX-s.offset().left,c=o-a/2;if(c=0>c?0:c>l?l:c,n)v[1]=c/l,D=!0;else switch(r){case"fscaret fss-left":D=!1,v[0]=c/l;break;case"fscaret fss-right":D=!0,v[1]=c/l;break;default:c<(v[0]+v[1])/2*l?(D=!1,v[0]=c/l):(D=!0,v[1]=c/l)}return W(),e(document).mouseup(function(e){O&&j()}),event.preventDefault?void event.preventDefault():!1}});var j=function(){u&&(O=!1,v[1]=y(v[1]*l)/l,n||(v[0]=y(v[0]*l)/l),W())};return this.mousemove(function(e){if(u){if(O){var t=s.width(),i=x.outerWidth(),a=b.outerWidth(),f=t-(i+a)/2,l=e.target,d=(l.className,e.pageX-s.offset().left),r=d-i/2;r=0>r?0:r>f?f:r,n?(v[1]=r/f,D=!0):D?(v[1]=r/f,v[1]<v[0]&&(v[1]=v[0])):(v[0]=r/f,v[0]>v[1]&&(v[0]=v[1])),W()}return event.preventDefault?void event.preventDefault():!1}}),this.getValue=function(){return n?[v[1]*l+a]:[v[0]*l+a,v[1]*l+a]},this.setValue=function(){n?(v[1]=(arguments[0]-a)/l,W()):arguments.length>=2&&(v[0]=(arguments[0]-a)/l,v[1]=(arguments[1]-a)/l,W())},this.setEnabled=function(e){u="undefined"==typeof e?!0:e,u?c.removeClass("fsdisabled"):c.addClass("fsdisabled")},this.setEnabled(u),W(),this}}(jQuery);